/*!
 * angular-extend-promises v1.0.0-rc.4 - 2016-12-15
 * (c) 2014-2016 L.systems SARL, Etienne Folio, Quentin Raynaud
 * https://bitbucket.org/lsystems/angular-extend-promises
 * License: MIT
 */
!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(function(){try{return require("lodash")}catch(t){}}()):"function"==typeof define&&define.amd?define(["lodash"],r):"object"==typeof exports?exports["angular-extend-promises"]=r(function(){try{return require("lodash")}catch(t){}}()):t["angular-extend-promises"]=r(t.lodash)}(this,function(t){return function(t){function r(e){if(n[e])return n[e].exports;var o=n[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,r,n){"use strict";angular.module("angular-extend-promises",[]).provider("angularExtendPromises",function(){this.options={compatibilityAliases:!0,disableES5Methods:!1},this.$get=function(){return this.options}}).config(["$provide",function(t){if(angular.mock)for(var r in n.c)delete n.c[r];t.decorator("$q",["$delegate","angularExtendPromises",function(t,r){var e=n(1);return e.$delegate=t,e.$options=r,n(4)}])}])},function(t,r,n){"use strict";var e=n(2);e.extend(t.exports,{$defer:e.noop(),$delegate:{},$options:{}})},function(t,r,n){"use strict";try{t.exports=n(3)}catch(r){t.exports=_}},function(r,n){if("undefined"==typeof t){var e=new Error('Cannot find module "lodash"');throw e.code="MODULE_NOT_FOUND",e}r.exports=t},function(t,r,n){"use strict";var e=n(2),o=n(1),i=n(5),s=t.exports=function(t){if(!e.isFunction(t))throw new Error("resolver should be a function");var r=s.defer();try{t(r.resolve,r.reject)}catch(t){r.reject(t)}return r.promise};e.extend(s,{all:n(6),any:n(24),bind:n(25),defer:n(26),each:n(27),filter:n(30),map:n(31),join:n(32),method:n(33),props:n(35),reduce:n(36),reject:n(37),resolve:n(39),some:n(40),when:n(41),AggregateError:i.AggregateError,TimeoutError:i.TimeoutError}),o.$options.compatibilityAliases&&e.extend(s,{attempt:n(34)}),o.$options.disableES5Methods||e.extend(s,{try:n(34)})},function(t,r){"use strict";var n=t.exports.NewQError=function(t){this.name=this.constructor.name,Error.apply(this,arguments),this.message=t,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack};n.prototype.toString=function(){return this.stack.toString()},n.subError=function(t,r){function e(){}r=r||n,e.prototype=r.prototype,t.prototype=new e,t.prototype.constructor=t,t.subError||(t.subError=function(r){n.subError(r,t)})},n.subError(n,Error);var e=t.exports.AggregateError=function(){n.apply(this,arguments)};n.subError(e);var o=t.exports.TimeoutError=function(){n.apply(this,arguments)};n.subError(o)},function(t,r,n){"use strict";var e=n(2),o=n(7),i=n(1),s=n(4);t.exports=function(t){return e.isArray(t)?(t=e.map(t,function(t){return s.when(t)}),o(i.$delegate.all(t))):s.props(t)}},function(t,r,n){"use strict";function e(t,r){u(this,"$$state",t.$$state),o.each(o.functionsIn(t),function(r){u(this,"$$"+r,t[r])}.bind(this)),r&&r.$$boundTo&&u(this,"$$boundTo",r.$$boundTo),u(this,"$$arrayListeners",[]),this.then=t.then=this.then.bind(this)}var o=n(2),i=n(1),s=n(8),u=n(10),c={catch:"caught",finally:"lastly",return:["thenReturn","returns"],throw:["thenThrow"]};t.exports=function(t,r){return new e(t,r)},e.prototype={all:s("all"),any:s("any"),bind:n(11),call:n(12),catch:n(13),delay:n(14),done:n(15),each:s("each"),filter:s("filter"),finally:function(){return this.$$finally.apply(this,arguments)},get:n(16),map:s("map"),nodeify:n(17),props:s("props"),reduce:s("reduce"),return:n(18),some:s("some"),spread:n(19),tap:n(20),then:n(21),throw:n(22),timeout:n(23),constructor:e},u(e.prototype,"$$callArrayListeners",function(t){o.each(this.$$arrayListeners,function(r){r(t)})}),o.each(c,function(t,r){o.isArray(t)||(t=[t]),i.$options.compatibilityAliases&&o.each(t,function(t){e.prototype[t]=e.prototype[r]}),i.$options.disableES5Methods&&delete e.prototype[r]})},function(t,r,n){"use strict";var e=n(9),o=n(4),i=n(10);t.exports=function(t){function r(r,n){var e=o[t].apply(null,[n].concat(r));return i(e,"$$boundTo",this.$$boundTo),e}return function(){var t=e.call(this,arguments);if(this.$$unsynced)return r.call(this,t,this.$$unsynced);var n=this.then(function(e){if(n.$$promiseResult)return n.$$promiseResult;var o=r.call(this,t,e);return n.$$arrayListeners.length&&o.$$unsynced&&n.$$callArrayListeners(o.$$unsynced),o}.bind(this));return this.$$arrayListeners.push(function(e){i(this,"$$promiseResult",r.call(this,t,e)),n.$$arrayListeners.length&&this.$$promiseResult.$$unsynced&&n.$$callArrayListeners(this.$$promiseResult.$$unsynced)}.bind(this)),n}}},function(t,r,n){"use strict";var e=n(2);t.exports=function(t){return e.map(t,function(t){return e.isFunction(t)?t.bind(this.$$boundTo||this):t}.bind(this))}},function(t,r){"use strict";t.exports=function(t,r,n){if(Object.defineProperty)try{Object.defineProperty(t,r,{value:n})}catch(t){}t[r]!==n&&(t[r]=n)}},function(t,r,n){"use strict";var e=n(10);t.exports=function(t){return e(this,"$$boundTo",t),this}},function(t,r,n){"use strict";var e=n(2);t.exports=function(){var t=e.toArray(arguments),r=t.shift();return this.then(function(n){return n[r].apply(n,t)})}},function(t,r,n){"use strict";function e(t,r){var n=!t.length;return i.each(t,function(t){if(!i.isFunction(t))throw new Error("Invalid argument.");return t instanceof Error||t.prototype instanceof Error?(n=n||r instanceof t,!n):(n=n||t(r),!n)}),n}var o=n(4),i=n(2);t.exports=function(){var t=i.toArray(arguments),r=t.pop();return this.$$catch(function(n){return i.isFunction(r)&&e(t,n)?r.call(this,n):o.reject(n)})}},function(t,r,n){"use strict";var e=n(1);t.exports=function(t){return this.then(function(r){var n=e.$defer(this);return setTimeout(n.resolve,t,r),n.promise}.bind(this))}},function(t,r,n){"use strict";var e=n(4);t.exports=function(){return this.then.apply(this,arguments).$$catch(function(t){setTimeout(function(){throw t})}).$$finally(function(){return e.reject(new Error("Do not chain anything after calling done()!"))})}},function(t,r){"use strict";t.exports=function(t){return this.then(function(r){return r[t]})}},function(t,r,n){"use strict";var e=n(2),o=n(4);t.exports=function(t,r){return t=t||e.noop,r=r||{},this.then(function(n){var o=n;return o=r.spread&&e.isArray(o)?[null].concat(o):[null,o],t.apply(this,o),n},function(r){return t.call(this,r),o.reject(r)})}},function(t,r,n){"use strict";var e=n(2);t.exports=function(t){return this.then(e.constant(t))}},function(t,r,n){"use strict";var e=n(2);t.exports=function(t){return this.then(function(r){return e.isArray(r)||(r=[r]),t.apply(this,r)})}},function(t,r,n){"use strict";var e=n(4);t.exports=function(t){return this.then(function(r){return e.when(t.call(this,r)).returns(r)})}},function(t,r,n){"use strict";var e=n(9),o=n(7);t.exports=function(){return o(this.$$then.apply(this,e.call(this,arguments)),this)}},function(t,r,n){"use strict";var e=n(4);t.exports=function(t){return this.then(function(){return e.reject(t)})}},function(t,r,n){"use strict";var e=n(1),o=n(4);t.exports=function(t,r){var n=e.$defer(this),i=setTimeout(function(){n.reject(new o.TimeoutError(r||"Timed out after "+t+" ms"))},t);return this.then(function(t){n.resolve(t)},function(t){n.reject(t)}).finally(clearTimeout.bind(null,i)),n.promise}},function(t,r,n){"use strict";var e=n(4);t.exports=function(t){return e.some(t,1).get(0)}},function(t,r,n){"use strict";var e=n(4);t.exports=function(t){return e.resolve().bind(t)}},function(t,r,n){"use strict";var e=n(7),o=n(1);o.$defer=function(t){var r=o.$delegate.defer();return r.promise=e(r.promise,t),r},t.exports=function(){return o.$defer()}},function(t,r,n){"use strict";var e=n(28);t.exports=e("tap")},function(t,r,n){"use strict";var e=n(2),o=n(4),i=n(29),s=n(10);t.exports=function(t){return function(r,n,u){u=e.pick(u,"concurrency");var c=u.concurrency?new i(u):{add:function(t){return t()}},a=e.map(r,function(e,i){return o.when(e)[t](function(t){return c.add(function(){return o.when(n.call(null,t,i,r.length))})})}),f=o.all(a);return s(f,"$$unsynced",a),f}}},function(t,r,n){"use strict";var e=n(2),o=n(1),i=t.exports=function(t){this.$options=e.defaults(t,{concurrency:1,maxQueue:0}),this.$fns=[]};i.prototype.add=function(t){var r=o.$defer(),n=function(){t().finally(function(){this.$fns.splice(this.$fns.indexOf(n),1),this.$fns.length>=this.$options.concurrency&&this.$fns[this.$options.concurrency-1]()}.bind(this)).then(function(t){r.resolve(t)},function(t){r.reject(t)})}.bind(this);return this.$fns.push(n)<=this.$options.concurrency&&n(),r.promise}},function(t,r,n){"use strict";var e=n(2),o=n(4);t.exports=function(t,r,n){return o.map(t,function(t){return o.props({val:t,toFilter:r.apply(null,arguments)})},n).then(function(t){return e.map(e.filter(t,"toFilter"),"val")})}},function(t,r,n){"use strict";var e=n(28);t.exports=e("then")},function(t,r,n){"use strict";var e=n(2),o=n(4);t.exports=function(){var t=e.toArray(arguments),r=t.pop();return o.all(t).spread(r)}},function(t,r,n){"use strict";var e=n(34);t.exports=function(t){return function(){return e(t,arguments,this)}}},function(t,r,n){"use strict";var e=n(2),o=n(4);t.exports=function(t,r,n){try{return e.isEmpty(r)||e.isArray(r)||e.isArguments(r)||(r=[r]),o.when(t.apply(n||this,r))}catch(t){return o.reject(t)}}},function(t,r,n){"use strict";var e=n(2),o=n(4);t.exports=function(t){return o.all(e.values(t)).then(function(r){return e.zipObject(e.keys(t),r)})}},function(t,r,n){"use strict";var e=n(2),o=n(4);t.exports=function(t,r,n){return e.reduce(t,function(n,e,i){return o.join(n,e,function(n,e){return r(n,e,i,t.length)})},o.resolve(n))}},function(t,r,n){"use strict";var e=n(38);t.exports=e("reject")},function(t,r,n){"use strict";var e=n(7),o=n(1);t.exports=function(t){return t in o.$delegate?function(){return e(o.$delegate[t].apply(o.$delegate,arguments))}:null}},function(t,r,n){"use strict";var e=n(4),o=n(38);t.exports=o("resolve")||function(t){var r=e.defer();return r.resolve(t),r.promise}},function(t,r,n){"use strict";var e=n(2),o=n(4),i=n(5).AggregateError;t.exports=function(t,r){if(t.length<r)return o.reject(new i("initial array length ("+t.length+") > count ("+r+")"));var n=0,s=[],u=o.defer();return e.each(t,function(e){o.when(e).tap(function(t){null!==s&&(s.push(t),s.length>=r&&(u.resolve(s),s=null))}).$$catch(function(){null!==s&&(++n,t.length-n<r&&(u.reject(new i("Cannot resolve promise: too many rejections ("+n+")")),s=null))})}),u.promise}},function(t,r,n){"use strict";var e=n(38);t.exports=e("when")}])});
//# sourceMappingURL=angular-extend-promises-without-lodash.min.js.map